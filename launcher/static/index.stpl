<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.gif" type="image/x-icon"/>
    <title>Electronvolt Launcher</title>
    <link rel="stylesheet" href="style.css" Type="text/css"/>
</head>
<body>
    <h1>Welcome!</h1>
    <button id="btn_launch">Launch Electronvolt</button>
    <div id="auth_form">
        <h2>Sign in with your<br>GameJolt account (optional)</h2>
        <input type="text" id="username" placeholder="Username" required>
        <input type="password" id="token" placeholder="Game token" required>
        <label class="show_token">
        <input type="checkbox" id="toggle_token"> Show token
        </label>
        <button id="btn_login">Login</button>
    </div>
    <script>
        var btnLaunch = document.getElementById("btn_launch");
        
        btnLaunch.onclick = function(e) {
            btnLaunch.disabled = true;
            appLaunchGame();
        };
        
        // Subscribe to launcher events
        window.onmessage = function(e) {
            console.log(e.data.event);
            if (e.data.event == "game_status_change") {
                if (e.data.status == "running")
                    btnLaunch.disabled = true;
                else
                    btnLaunch.disabled = false;
            }
        };
    </script>
</body>
</html>
